"use strict";(self.webpackChunkngo_project_fe=self.webpackChunkngo_project_fe||[]).push([[945],{945:(T,d,i)=>{i.r(d),i.d(d,{UserProfilePageModule:()=>S});var c=i(6814),g=i(1896),e=i(5879),p=i(3076);const u=function(n,l){return{active:n,inactive:l}};let b=(()=>{class n{constructor(t,r){this.router=t,this.userService=r,this.activeForm="change",this.user=this.userService.getLoggedInUser(),0===this.user._id&&(this.userService.getUserById(Number(localStorage.getItem("user_id"))).subscribe(o=>{this.userService.selectedUser$.emit(o)}),this.userService.selectedUser$.subscribe(o=>{this.user=o}))}ngOnInit(){this.router.events.subscribe(t=>{t instanceof g.m2&&this.updateActiveForm(t.url)})}updateActiveForm(t){t.includes("/user-profile/change")?this.activeForm="change":t.includes("/user-profile/password")&&(this.activeForm="password")}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(g.F0),e.Y36(p.K))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-user-profile-page"]],decls:27,vars:10,consts:[[1,"layout"],[1,"row",2,"margin","0 10%"],[1,"col-md-4"],[1,"page-explanation"],["src","/assets/images/profile.svg"],[1,"col-md-8",2,"background-color","white"],[2,"padding","3rem 1rem 2rem"],[1,"page-content-white"],[1,"spacer2"],[1,"main-text"],[1,"user-name"],[1,"navigation-links"],["routerLink","/user-profile/change",1,"navigation-link","personal-details",3,"ngClass"],["routerLink","/user-profile/password",1,"navigation-link","password",3,"ngClass"]],template:function(r,o){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),e._uU(5,"Tvoje"),e.qZA(),e.TgZ(6,"h1")(7,"b"),e._uU(8,"nastavenia"),e.qZA()(),e.TgZ(9,"div")(10,"p"),e._uU(11," Tu si m\xf4\u017ee\u0161 zmeni\u0165 meno, priezvisko alebo heslo ako len potrebuje\u0161. "),e.qZA(),e._UZ(12,"img",4),e.qZA()()(),e.TgZ(13,"div",5)(14,"div",6)(15,"div",7),e._UZ(16,"div",8),e.TgZ(17,"div",9)(18,"h1",10),e._uU(19),e.qZA()(),e._UZ(20,"div",8),e.qZA(),e.TgZ(21,"div",11)(22,"a",12),e._uU(23,"Zmeni\u0165 \xfadaje"),e.qZA(),e.TgZ(24,"a",13),e._uU(25,"Zmeni\u0165 heslo"),e.qZA()(),e._UZ(26,"router-outlet"),e.qZA()()()()),2&r&&(e.xp6(19),e.AsE("",o.user.name," ",o.user.surname,""),e.xp6(3),e.Q6J("ngClass",e.WLB(4,u,"change"===o.activeForm,"change"!==o.activeForm)),e.xp6(2),e.Q6J("ngClass",e.WLB(7,u,"password"===o.activeForm,"password"!==o.activeForm)))},dependencies:[c.mk,g.lC,g.rH],styles:[".row[_ngcontent-%COMP%]{height:100%}h1[_ngcontent-%COMP%]{font-size:40px;padding:.5rem}.layout[_ngcontent-%COMP%]{background:linear-gradient(.25turn,#f7fbff,#f7fbff,#fff);height:100vh}.page-explanation[_ngcontent-%COMP%]{background-color:#f7fbff;padding:3rem 5rem 0 0;width:100%;height:100%}p[_ngcontent-%COMP%]{font-size:16px;text-align:left;padding:3rem 0}.navigation-links[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;padding:1rem}.navigation-link[_ngcontent-%COMP%]{font-family:Inter;font-weight:700;font-size:20px;line-height:24px;text-decoration:none;display:inline-block;margin:0 10px;padding:10px}.personal-details.active[_ngcontent-%COMP%], .password.active[_ngcontent-%COMP%]{color:#ff4d00}.personal-details.inactive[_ngcontent-%COMP%], .password.inactive[_ngcontent-%COMP%]{color:#c1c0c0}.user-name[_ngcontent-%COMP%]{font-size:48px;font-weight:700}.page-content-white[_ngcontent-%COMP%]{text-align:center;position:relative;padding:2rem 0}"]})}return n})();var m=i(5619),s=i(6223),h=i(6694);function v(n,l){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.ekj("message-bar-success",!t.error)("message-bar-error",t.error),e.xp6(1),e.Oqu(t.message)}}function P(n,l){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.ekj("message-bar-success",!t.error)("message-bar-error",t.error),e.xp6(1),e.Oqu(t.message)}}const C=[{path:"",redirectTo:"change",pathMatch:"full"},{path:"",component:b,children:[{path:"change",component:(()=>{class n{constructor(t,r,o){this.userService=t,this.fb=r,this.userDataService=o,this.user=this.userService.getLoggedInUser(),this.message=null,this.error=!1,this.userDataSubject=new m.X(null),this.userData$=this.userDataSubject.asObservable(),this.changeForm=this.fb.group({name:[""],surname:[""]}),this.activeForm="change",this.changeForm.setValue({name:this.user.name,surname:this.user.surname}),this.userService.selectedUser$.subscribe(a=>{this.user=a,this.changeForm.setValue({name:a.name,surname:a.surname})})}setActiveForm(t){this.activeForm=t}sanitizeValue(t){return t??""}onSubmit(){const t=this.sanitizeValue(this.changeForm.get("name")?.value),r=this.sanitizeValue(this.changeForm.get("surname")?.value),o={...this.user,name:t,surname:r};this.userService.updateUser(this.user._id,o).subscribe({next:a=>{this.userService.selectedUser$.emit(a),this.message="\xdaspe\u0161ne zmenen\xe9",setTimeout(()=>this.message=null,3e3),this.userDataService.updateUserData(o)},error:a=>{this.message="Nastala chyba",this.error=!0,setTimeout(()=>{this.message=null,this.error=!1},3e3)}})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(p.K),e.Y36(s.qu),e.Y36(h.M))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-change-form"]],decls:13,vars:2,consts:[[1,"change",3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","formControlName","name","placeholder","Meno",1,"form-control"],[3,"message-bar-success","message-bar-error",4,"ngIf"],["for","surname"],["type","text","formControlName","surname","placeholder","Priezvisko",1,"form-control"],[1,"button-position"],["type","submit",1,"btn","btn-orange-form"]],template:function(r,o){1&r&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(1,"div",1)(2,"label",2),e._uU(3,"Meno"),e.qZA(),e._UZ(4,"input",3),e.qZA(),e.YNc(5,v,2,5,"div",4),e.TgZ(6,"div",1)(7,"label",5),e._uU(8,"Priezvisko"),e.qZA(),e._UZ(9,"input",6),e.qZA(),e.TgZ(10,"div",7)(11,"button",8),e._uU(12," Ulo\u017ei\u0165 zmeny "),e.qZA()()()),2&r&&(e.Q6J("formGroup",o.changeForm),e.xp6(5),e.Q6J("ngIf",o.message))},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".page-content-white[_ngcontent-%COMP%]{text-align:center;position:relative}.welcome[_ngcontent-%COMP%]{font-size:48px;font-weight:700}.change[_ngcontent-%COMP%]{padding:5% 15%}input[_ngcontent-%COMP%]{border-radius:80px;padding:5%}label[_ngcontent-%COMP%]{text-align:left;font-style:normal;font-weight:400;font-size:16px;color:#929090;padding-bottom:1%}.label-position[_ngcontent-%COMP%]   label[for=surname][_ngcontent-%COMP%], .label-position[_ngcontent-%COMP%]   label[for=name][_ngcontent-%COMP%]{margin-left:23px}.form-group[_ngcontent-%COMP%]{padding:1rem 2rem;margin:0 auto}.btn-orange-form[_ngcontent-%COMP%]{width:50%;padding:1.5rem;filter:drop-shadow(0px 4px 10px rgba(0,0,0,.25));background:linear-gradient(87.91deg,#FF5800 .65%,#FF8B00 100%);border-radius:50px;font-style:normal;font-weight:700;font-size:16px;line-height:19px;text-transform:uppercase;color:#fff}.btn-orange-form[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#FF4D00 0%,#FC7900 99.99%);color:#fff}.form[_ngcontent-%COMP%]{padding-top:7.5vh}.button-position[_ngcontent-%COMP%]{padding:1rem;text-align:center}.spacer2[_ngcontent-%COMP%]{padding-top:3%}.spacer3[_ngcontent-%COMP%]{padding-top:15vh}.bottom-description-position[_ngcontent-%COMP%]{text-align:center;padding-top:5vh}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0rem}.personal-details[_ngcontent-%COMP%]{font-family:Inter;font-weight:700;font-size:20px;line-height:24px;text-decoration:none;display:inline-block;margin:0 20px;color:#ff4d00}.password[_ngcontent-%COMP%]{font-family:Inter;font-weight:700;font-size:20px;line-height:24px;text-decoration:none;display:inline-block;margin:0 20px;color:#c1c0c0}.message-bar-success[_ngcontent-%COMP%]{text-align:center;padding-top:3vh;position:absolute;right:26%;top:3;z-index:1;filter:drop-shadow(0px 4px 10px rgba(0,0,0,.25));background:linear-gradient(87.91deg,#4CAF50 .65%,#04ff00 100%);border-radius:50px;font-style:normal;font-weight:700;font-size:16px;line-height:19px;text-transform:uppercase;width:399.03px;height:73px}.message-bar-error[_ngcontent-%COMP%]{text-align:center;padding-top:3vh;position:absolute;right:26%;top:3;z-index:1;filter:drop-shadow(0px 4px 10px rgba(0,0,0,.25));background:linear-gradient(87.91deg,#FF4D00 .65%,#FF8B00 100%);border-radius:50px;font-style:normal;font-weight:700;font-size:16px;line-height:19px;text-transform:uppercase;width:399.03px;height:73px}"]})}return n})()},{path:"password",component:(()=>{class n{constructor(t,r,o){this.userService=t,this.fb=r,this.userDataService=o,this.user=this.userService.getLoggedInUser(),this.message=null,this.error=!1,this.userDataSubject=new m.X(null),this.userData$=this.userDataSubject.asObservable(),this.activeForm="change",this.userService.selectedUser$.subscribe(a=>{this.user=a}),this.passwordForm=this.fb.group({newPassword:["",[s.kI.required,s.kI.minLength(8)]],confirmPassword:["",s.kI.required]})}ngOnInit(){this.passwordForm.setValue({newPassword:"",confirmPassword:""})}setActiveForm(t){this.activeForm=t}sanitizeValue(t){return t??""}onSubmit(){const t=this.passwordForm.get("newPassword"),r=this.passwordForm.get("confirmPassword");if(!t||!r)return;const o=t.value,a=r.value;if(void 0===o||void 0===a||o!==a)return this.message="Hesl\xe1 sa nezhoduj\xfa",this.error=!0,void setTimeout(()=>{this.message=null,this.error=!1},3e3);void 0!==o&&this.userService.updateUserPassword(this.user._id,{password:o}).subscribe({next:f=>{this.user={...this.user,password:o},this.userDataService.updateUserData(this.user),this.userService.selectedUser$.emit(f),this.message="Heslo \xfaspe\u0161ne zmenen\xe9",setTimeout(()=>this.message=null,3e3)},error:f=>{this.message="Nastala chyba",this.error=!0,setTimeout(()=>{this.message=null,this.error=!1},3e3)}})}static#e=this.\u0275fac=function(r){return new(r||n)(e.Y36(p.K),e.Y36(s.qu),e.Y36(h.M))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-password-form"]],decls:13,vars:2,consts:[[1,"change",3,"formGroup","ngSubmit"],[1,"form-group"],["for","newPassword"],["type","password","formControlName","newPassword","placeholder","*****",1,"form-control"],["for","confirmPassword"],["type","password","formControlName","confirmPassword","placeholder","*****",1,"form-control"],[3,"message-bar-success","message-bar-error",4,"ngIf"],[1,"button-position"],["type","submit",1,"btn","btn-orange-form"]],template:function(r,o){1&r&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(1,"div",1)(2,"label",2),e._uU(3,"Nov\xe9 heslo"),e.qZA(),e._UZ(4,"input",3),e.qZA(),e.TgZ(5,"div",1)(6,"label",4),e._uU(7,"Potvrdi\u0165 nov\xe9 heslo"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.YNc(9,P,2,5,"div",6),e.TgZ(10,"div",7)(11,"button",8),e._uU(12," Zmeni\u0165 heslo "),e.qZA()()()),2&r&&(e.Q6J("formGroup",o.passwordForm),e.xp6(9),e.Q6J("ngIf",o.message))},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".page-content-white[_ngcontent-%COMP%]{text-align:center;position:relative}.welcome[_ngcontent-%COMP%]{font-size:48px;font-weight:700}.change[_ngcontent-%COMP%]{padding:5% 15%}input[_ngcontent-%COMP%]{border-radius:80px;padding:5%}label[_ngcontent-%COMP%]{text-align:left;font-style:normal;font-weight:400;font-size:16px;color:#929090;padding-bottom:1%}.label-position[_ngcontent-%COMP%]   label[for=surname][_ngcontent-%COMP%], .label-position[_ngcontent-%COMP%]   label[for=name][_ngcontent-%COMP%]{margin-left:23px}.form-group[_ngcontent-%COMP%]{padding:1rem 2rem;margin:0 auto}.btn-orange-form[_ngcontent-%COMP%]{width:50%;padding:1.5rem;filter:drop-shadow(0px 4px 10px rgba(0,0,0,.25));background:linear-gradient(87.91deg,#FF5800 .65%,#FF8B00 100%);border-radius:50px;font-style:normal;font-weight:700;font-size:16px;line-height:19px;text-transform:uppercase;color:#fff}.btn-orange-form[_ngcontent-%COMP%]:hover{background:linear-gradient(90deg,#FF4D00 0%,#FC7900 99.99%);color:#fff}.form[_ngcontent-%COMP%]{padding-top:7.5vh}.button-position[_ngcontent-%COMP%]{padding:1rem;text-align:center}.spacer2[_ngcontent-%COMP%]{padding-top:3%}.spacer3[_ngcontent-%COMP%]{padding-top:15vh}.bottom-description-position[_ngcontent-%COMP%]{text-align:center;padding-top:5vh}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0rem}.personal-details[_ngcontent-%COMP%]{font-family:Inter;font-weight:700;font-size:20px;line-height:24px;text-decoration:none;display:inline-block;margin:0 20px;color:#ff4d00}.password[_ngcontent-%COMP%]{font-family:Inter;font-weight:700;font-size:20px;line-height:24px;text-decoration:none;display:inline-block;margin:0 20px;color:#c1c0c0}.message-bar-success[_ngcontent-%COMP%]{text-align:center;padding-top:3vh;position:absolute;right:26%;top:3;z-index:1;filter:drop-shadow(0px 4px 10px rgba(0,0,0,.25));background:linear-gradient(87.91deg,#4CAF50 .65%,#04ff00 100%);border-radius:50px;font-style:normal;font-weight:700;font-size:16px;line-height:19px;text-transform:uppercase;width:399.03px;height:73px}.message-bar-error[_ngcontent-%COMP%]{text-align:center;padding-top:3vh;position:absolute;right:26%;top:3;z-index:1;filter:drop-shadow(0px 4px 10px rgba(0,0,0,.25));background:linear-gradient(87.91deg,#FF4D00 .65%,#FF8B00 100%);border-radius:50px;font-style:normal;font-weight:700;font-size:16px;line-height:19px;text-transform:uppercase;width:399.03px;height:73px}"]})}return n})()}]}];let w=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(C),g.Bz]})}return n})();var F=i(5597),M=i(5313),O=i(3365),Z=i(3566),_=i(2032),y=i(9157),U=i(617);let S=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[c.ez,w,F.uH,s.u5,s.UX,M.p0,O.TU,Z.JX,_.c,y.lN,U.Ps]})}return n})()}}]);